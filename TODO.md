* make sure occurences of "^" are sensible
* ensure tail-call recursion is used everywhere